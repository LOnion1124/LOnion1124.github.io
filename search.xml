<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>SICP知识点拾遗</title>
      <link href="/posts/52db781ce079/"/>
      <url>/posts/52db781ce079/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>著名的CS自学网站<ahref="https://csdiy.wiki/">CS自学指南</a>的首页就提到过这门传奇的编程入门课程——SICP。在该网页内提供的版本是加州伯克利大学的线上学习资源。</p><p>这门课程并不将重点放在某一个具体的编程语言上，而是更多关注<strong>编写程序本身</strong>的通用范式，从通用计算机处理语言的逻辑入手，帮助初学者快速上手，开启编程之旅。</p><p>笔者在新加坡国立大学举办的暑校中全程参与了SICP课程，NUS版本的SICP基于该校学生自主构建的JavaScript实验平台<ahref="https://sourceacademy.org/playground">SourceAcademy</a>，使用JS的子语言Source（由开发者创立），良好的前端性质赋予了这门课程更人性化的程序交互功能（比如逐步实现程序）。这里顺便贴出笔者完成的课程设计：一个2048小游戏的化学同位素版本，在<ahref="https://share.sourceacademy.org/91e5d">此处</a>可以直接体验（点击左上角Run按钮，在右侧切换到游戏窗口视图（第四个））。代码在上述链接和<ahref="https://github.com/LOnion1124/SICP-Project-Isotopic256pro">Github仓库</a>都可以查看。这个游戏的灵感来源于<ahref="https://github.com/JamesDonnelly/Isotopic256">Isotopic256</a>。</p><p>对于至少接触过一个学期的CS专业课的同学而言，这门课程应该确实是略显基础了，极大部分内容，哪怕学校课程并没有明确指出，在实际编程的过程中也应该自主体会过了（比如内存模型和变量生存周期之类）。</p><p>基于以上原因，我利用参与这门课程的无聊时间整理了一些值得记忆或了解的知识点，供已经有一些编程基础，但是又对这门课程感兴趣的同学们快速补全。</p><h2 id="recursion递归的进一步探讨">Recursion：递归的进一步探讨</h2><p>SICP指出，递归不仅仅是一个函数调用它自己，或者说在此基础上可以做出一种分类，即<strong>迭代过程</strong>和<strong>递归过程</strong>，这两种方式的关键区别在于是否产生函数栈堆积。</p><p>概念辨析：</p><ul><li>递归函数：在函数体内部直接或者间接调用自身的函数。</li><li>递归过程（RecursiveProcess）：通过一系列<em>延迟的</em>运算操作实现的<em>程序运行过程</em>。</li><li>迭代过程（：<em>不含有</em>延迟的运算操作而实现的<em>程序运行过程</em>。</li></ul><p>一个递归函数的实现可能是通过递归过程，也可能是通过迭代过程。</p><p>来看经典的递归例子——阶乘计算：</p><div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">factorial</span>(n) &#123;</span><span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> n <span class="op">===</span> <span class="dv">0</span></span><span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>         <span class="op">?</span> <span class="dv">1</span></span><span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>         <span class="op">:</span> n <span class="op">*</span> <span class="fu">factorial</span>(n <span class="op">-</span> <span class="dv">1</span>)<span class="op">;</span></span><span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>&#125;</span></code></pre></div><p>这个例子是一个递归过程，因为当前步骤需要在子步骤完成之后在进行计算，这就是“延迟的”运算操作。</p><p>再来看阶乘计算的另一种实现方式：</p><div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">factorial</span>(n) &#123;</span><span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">fact_iter</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> n)<span class="op">;</span></span><span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span><span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">fact_iter</span>(product<span class="op">,</span> counter<span class="op">,</span> max_count) &#123;</span><span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> counter <span class="op">&gt;</span> max_count</span><span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>         <span class="op">?</span> product</span><span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>         <span class="op">:</span> <span class="fu">fact_iter</span>(counter <span class="op">*</span> product<span class="op">,</span> counter <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> max_count)<span class="op">;</span></span><span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>&#125;</span></code></pre></div><p>我们发现在这段代码中，虽然函数调用了自己，但是当前的返回值没有任何需要在子步骤计算完成之后额外计算的内容（即先前的函数调用不需要堆积在栈内存里等待递归结束），因此这个过程是一个线性迭代过程。</p><h3 id="将递归过程转换为迭代过程">将递归过程转换为迭代过程</h3><p>一般来说，新建一个Helperfunction迭代函数，记录迭代状态和当前结果，然后将递归函数函数做成顶层函数，调用迭代函数的初态。可以将上例封装起来（注意迭代函数只需要记录两个参数）：</p><div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">factorial</span>(n) &#123;</span><span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">iter</span>(product<span class="op">,</span> counter) &#123;</span><span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> counter <span class="op">&gt;</span> n</span><span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>           <span class="op">?</span> product</span><span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>           <span class="op">:</span> <span class="fu">iter</span>(counter <span class="op">*</span> product<span class="op">,</span> counter <span class="op">+</span> <span class="dv">1</span>)<span class="op">;</span></span><span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  &#125;</span><span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">iter</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></span><span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>&#125;</span></code></pre></div><p>下面介绍一种更普适的<strong>编程思想（风格）</strong>，可以将一般递归转化为尾递归（即迭代过程）。</p><h3 id="continuation-passing-style递归的cps风格">Continuation PassingStyle：递归的CPS风格</h3><p>可以参考<ahref="https://misakatang.cn/2018/10/04/Continuation-passing-style-CPS%E5%8F%98%E6%8D%A2%E6%BC%AB%E8%B0%88/">这篇博客</a>。</p><p>简单来说，CPS也是通过实现一个迭代函数完成的，与之前的方法的区别在于以下两点：</p><ul><li><p>CPS的迭代顺序是逆序的（从n到1），与普通递归顺序一致。</p></li><li><p>CPS通过一个匿名函数描述当前的迭代状态。具体地说，这个函数包括了从当前状态到最终结果需要进行的一切步骤。</p></li><li><p>CPS可以把任何递归函数变成尾递归（见下文），可以保证在一定程度上避免栈溢出（对于支持尾递归优化的编译器而言）。</p></li></ul><p>从第二点可以看出，程序最终的返回值就是把最终的状态函数作用在初值上。</p><p>举个例子：</p><div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">factorial_cps</span>(n<span class="op">,</span> cont)</span><span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> n <span class="op">===</span> <span class="dv">1</span></span><span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>           <span class="op">?</span> <span class="fu">cont</span>(<span class="dv">1</span>)</span><span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>           <span class="op">:</span> <span class="fu">factorial_cps</span>(n <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> x <span class="kw">=&gt;</span> <span class="fu">cont</span>(n <span class="op">*</span> x))<span class="op">;</span></span><span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span><span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">factorial</span>(n)</span><span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">factorial_cps</span>(n<span class="op">,</span> x <span class="kw">=&gt;</span> x)<span class="op">;</span></span><span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>&#125;</span></code></pre></div><p>上例实现了阶乘函数，重点在于理解递归的传入参数<code>x =&gt; cont(n * x)</code>这一步骤。根据假设，此处的<code>x</code>代表的是之后的递归过程得到的结果，此处可以理解为已经计算好的<code>n - 1</code>的阶乘，那么在这一步我们要对这个结果做的事情就是乘上<code>n</code>，然后将其扔进现有的<code>cont</code>函数供后续处理。</p><p>从上例我们可以看出，CPS维护的参数函数的特征是：<strong>接入一个参数，返回一个参数</strong>。</p><p>对于较为复杂的递归方程，比如需要调用两次子递归得到现态的斐波那契数列：<span class="math display">\[f(n) = f(n - 1) + f(n - 2), f(0) = 0\]</span>我们也可以把它转化成CPS风格，但需要进行一些转化以便维持<code>cont</code>函数的性质：</p><div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">fib_cps</span>(n<span class="op">,</span> cont)</span><span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> n <span class="op">===</span> <span class="dv">0</span></span><span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>           <span class="op">?</span> <span class="fu">cont</span>(<span class="dv">0</span>)</span><span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>           <span class="op">:</span> n <span class="op">===</span> <span class="dv">1</span></span><span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>           <span class="op">?</span> <span class="fu">cont</span>(<span class="dv">1</span>)</span><span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>           <span class="op">:</span> <span class="fu">fib_cps</span>(n <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> x <span class="kw">=&gt;</span> <span class="fu">fib_cps</span>(n <span class="op">-</span> <span class="dv">2</span><span class="op">,</span> y <span class="kw">=&gt;</span> <span class="fu">cont</span>(x <span class="op">+</span> y)))<span class="op">;</span></span><span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span><span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">fib</span>(n)</span><span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">fib_cps</span>(n<span class="op">,</span> x <span class="kw">=&gt;</span> x)<span class="op">;</span></span><span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>&#125;</span></code></pre></div><p>可以证明，对于任意的递归方程，我们都可以通过某种方式用CPS风格将其实现。这就是为什么CPS是一种<strong>风格</strong>而不是算法。它只是我们实现递归的众多方式之一。</p><h2 id="higher-order-functions函数式编程基础">Higher OrderFunctions：函数式编程基础</h2><p>函数可以作为另一个函数的输入/返回值。外层函数成为Higher OrderFunction。</p><div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">sum</span>(term<span class="op">,</span> a<span class="op">,</span> next<span class="op">,</span> b)</span><span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">&gt;</span> b</span><span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>                 <span class="op">?</span> <span class="dv">0</span></span><span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>                 <span class="op">:</span> <span class="fu">term</span>(a) <span class="op">+</span> <span class="fu">sum</span>(term<span class="op">,</span> <span class="fu">next</span>(a)<span class="op">,</span> next<span class="op">,</span> b)<span class="op">;</span></span><span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span><span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">cube</span>(x)</span><span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x <span class="op">*</span> x <span class="op">*</span> x<span class="op">;</span></span><span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span><span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">add_one</span>(x)</span><span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span><span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span><span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(cube<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> add_one<span class="op">,</span> <span class="dv">5</span>)<span class="op">;</span> <span class="co">// Calculates 3^3 + 4^3 + 5^3</span></span></code></pre></div><p>以上是一个简易的使用函数式思想的例子，实现了自定义处理方式和迭代方法的累加器。</p><h3 id="函数嵌套定义">函数嵌套定义</h3><p>在代码块中（包括函数定义内部）可以定义其他函数，使其仅在该函数内部可见。</p><div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">sum</span>(term<span class="op">,</span> a<span class="op">,</span> next<span class="op">,</span> b)</span><span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">cube</span>(x)</span><span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  &#123;</span><span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">*</span> x <span class="op">*</span> x<span class="op">;</span></span><span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  &#125;</span><span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span><span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">add_one</span>(x)</span><span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  &#123;</span><span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span><span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  &#125;</span><span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">&gt;</span> b</span><span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>                 <span class="op">?</span> <span class="dv">0</span></span><span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>                 <span class="op">:</span> <span class="fu">term</span>(a) <span class="op">+</span> <span class="fu">sum</span>(term<span class="op">,</span> <span class="fu">next</span>(a)<span class="op">,</span> next<span class="op">,</span> b)<span class="op">;</span></span><span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span><span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(cube<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> add_one<span class="op">,</span> <span class="dv">5</span>)<span class="op">;</span> <span class="co">// Calculates 3^3 + 4^3 + 5^3</span></span></code></pre></div><p>在封装功能时可以使用此特性。</p><h3 id="匿名函数">匿名函数</h3><p><strong>出现了！是野生的lambda函数。</strong></p><p>在Source语言中，匿名函数的定义方法如下：</p><ul><li>列出参数（多参数使用小括号括起）</li><li>列出返回值（多条语句使用大括号括起）</li><li>使用<code>=&gt;</code>连接</li></ul><p>使用匿名函数改写上例：</p><div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">sum</span>(term<span class="op">,</span> a<span class="op">,</span> next<span class="op">,</span> b)</span><span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">&gt;</span> b</span><span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>                 <span class="op">?</span> <span class="dv">0</span></span><span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>                 <span class="op">:</span> <span class="fu">term</span>(a) <span class="op">+</span> <span class="fu">sum</span>(term<span class="op">,</span> <span class="fu">next</span>(a)<span class="op">,</span> next<span class="op">,</span> b)<span class="op">;</span></span><span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span><span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x <span class="kw">=&gt;</span> x <span class="op">*</span> x <span class="op">*</span> x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> x <span class="kw">=&gt;</span> x <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">5</span>)<span class="op">;</span> <span class="co">// Calculates 3^3 + 4^3 + 5^3</span></span></code></pre></div><p>多参数函数改写格式：</p><div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>(x<span class="op">,</span> y) <span class="kw">=&gt;</span> x <span class="op">+</span> y</span></code></pre></div><p>函数体包含多行：</p><div class="sourceCode" id="cb10"><preclass="sourceCode js"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>x <span class="kw">=&gt;</span> &#123;<span class="kw">const</span> y <span class="op">=</span> x <span class="op">*</span> x <span class="op">*</span> x<span class="op">;</span> <span class="cf">return</span> y<span class="op">;</span>&#125;</span></code></pre></div><h3 id="函数作为返回值">函数作为返回值</h3><p>字面意思，返回一个函数即可。</p><p>下例创建一个自定义步长的迭代器：</p><div class="sourceCode" id="cb11"><preclass="sourceCode js"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">create_adder</span>(n)</span><span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">adder</span>(x)</span><span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    &#123;</span><span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> x <span class="op">+</span> n<span class="op">;</span></span><span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    &#125;</span><span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> adder<span class="op">;</span></span><span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>&#125;</span></code></pre></div><p>使用匿名函数：</p><div class="sourceCode" id="cb12"><preclass="sourceCode js"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">create_adder</span>(n)</span><span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="kw">=&gt;</span> x <span class="op">+</span> n<span class="op">;</span></span><span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>&#125;</span></code></pre></div><p>支持嵌套调用：</p><div class="sourceCode" id="cb13"><preclass="sourceCode js"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">create_adder</span>(<span class="dv">4</span>)(<span class="dv">22</span>)<span class="op">;</span> <span class="co">// Evaluate to 26</span></span></code></pre></div><p>一个有趣的例子：重复应用n次函数，体现了函数式和递归的结合：</p><div class="sourceCode" id="cb14"><preclass="sourceCode js"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">repeat</span>(f<span class="op">,</span> n)</span><span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> n <span class="op">===</span> <span class="dv">1</span></span><span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>           <span class="op">?</span> x <span class="kw">=&gt;</span> <span class="fu">f</span>(x)</span><span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>           <span class="op">:</span> x <span class="kw">=&gt;</span> <span class="fu">f</span>(<span class="fu">repeat</span>(f<span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span>)(x))<span class="op">;</span></span><span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span><span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">add</span>(x)</span><span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span><span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span><span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">square</span>(x)</span><span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">*</span> x<span class="op">;</span></span><span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a></span><span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="fu">repeat</span>(add<span class="op">,</span> <span class="dv">5</span>)(<span class="dv">1</span>)<span class="op">;</span> <span class="co">// Gets 6 = 1+1+1+1+1+1</span></span><span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a></span><span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="fu">repeat</span>(square<span class="op">,</span> <span class="dv">3</span>)(<span class="dv">2</span>)<span class="op">;</span> <span class="co">// Gets 256 = ((2^2)^2)^2</span></span></code></pre></div><h2 id="data-abstaction">Data Abstaction</h2><p>介绍了一些简单的数据封装概念，可以看成是数据结构的前置内容。由于大部分内容都比较基础，这里仅挑选了一些有趣的例子和知识点进行说明。</p><h3 id="简单的例子pair">简单的例子：pair</h3><p>给出一个基于函数式的数对结构（pair）的有趣实现方法：</p><div class="sourceCode" id="cb15"><preclass="sourceCode js"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">make_pair</span>(x<span class="op">,</span> y)</span><span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> component <span class="kw">=&gt;</span> component <span class="op">===</span> <span class="dv">0</span> <span class="op">?</span> x <span class="op">:</span> y<span class="op">;</span></span><span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span><span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">head</span>(p)</span><span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">p</span>(<span class="dv">0</span>)<span class="op">;</span></span><span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span><span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">tail</span>(p)</span><span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">p</span>(<span class="dv">1</span>)<span class="op">;</span></span><span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a></span><span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> p <span class="op">=</span> <span class="fu">make_pair</span>(<span class="dv">3</span><span class="op">,</span> <span class="dv">6</span>)<span class="op">;</span></span><span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="fu">display</span>(<span class="fu">head</span>(p))<span class="op">;</span> <span class="co">// Gets 3</span></span><span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="fu">display</span>(<span class="fu">tail</span>(p))<span class="op">;</span> <span class="co">// Gets 6</span></span></code></pre></div><p>有区别于一般的思路（把数据结构封装成对象），这里把数据结构做成了一个函数，基于输入实现不同的功能，对于用户而言，效果是一样的。</p><p>另一种更抽象的实现方式：</p><div class="sourceCode" id="cb16"><preclass="sourceCode js"><code class="sourceCode javascript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> pair <span class="op">=</span> (x<span class="op">,</span> y) <span class="kw">=&gt;</span> f <span class="kw">=&gt;</span> <span class="fu">f</span>(x<span class="op">,</span> y)<span class="op">;</span></span><span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span><span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> head <span class="op">=</span> p <span class="kw">=&gt;</span> <span class="fu">p</span>((x<span class="op">,</span> y) <span class="kw">=&gt;</span> x)<span class="op">;</span></span><span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> tail <span class="op">=</span> p <span class="kw">=&gt;</span> <span class="fu">p</span>((x<span class="op">,</span> y) <span class="kw">=&gt;</span> y)<span class="op">;</span></span><span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span><span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> p <span class="op">=</span> <span class="fu">pair</span>(<span class="dv">3</span><span class="op">,</span> <span class="dv">6</span>)<span class="op">;</span></span><span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span><span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="fu">display</span>(<span class="fu">head</span>(p))<span class="op">;</span> <span class="co">// Gets 3</span></span><span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="fu">display</span>(<span class="fu">tail</span>(p))<span class="op">;</span> <span class="co">// Gets 6</span></span></code></pre></div><p>这里的数对依然是函数，但是这个函数接受一个函数作为输入，并把两个数据传入输入的函数中，因此要获得第一个数据或者第二个数据就需要通过传入不同的函数（比如接入两个参数返回第一个）实现。</p><p>这里也可以看出功能封装在编程中的体现：功能一致，实现方式可以不同。</p><h3 id="用pair实现list这就是链表">用pair实现list：这就是链表</h3><p>显然如果用pair去维护pair我们就可以维护更多数据了，列表定义如下：</p><ul><li>一个<strong>列表（list）</strong>是空的（null），或者一个pair，它的tail是一个列表。</li></ul><p>像这样：<code>pair(1, pair(2, pair(3, pair(4, pair(5, null)))))</code></p><p>从内存模型上看，就是通过链表结构维护的线性表。显然，这种写法暗示了我们可以通过递归的方式遍历链表（而不是常用的for循环）。事实上，在Source语言的前两个章节，根本没有变量和循环可以使用（只能说确实是为编程基础教育设计出来的语言）。</p><h3 id="二叉树">（二叉）树</h3><p>SICP接着介绍了如何使用pair维护tree。由于一个pair只能储存两个数据（抽象的或者不抽象的），基于这种方式实现的结构必然是二叉树（不考虑FirstChild-NextSibling方法表示的多叉树）。甚至，由于如果存了两个数据就没有多余的地方存放指向子节点的指针，这棵二叉树只能在度小于等于1的节点上存放数据。</p><p>叶子节点的tail指针指向null，因此这棵树满足：在所有度小于等于1的节点存有有且仅有一个相应类型的数据。</p><p>给出递归形式的定义：</p><ul><li>一个<strong>树（tree）</strong>是空的（null），或者是一个pair，它的head是一个数据或者一棵树，tail是一棵树。</li></ul><p>在这种语义下，树的结构事实上是一种嵌套链表。</p><p>注意根据定义，一个树只能维护一种固定的数据类型（而在多态语义下的链表，根据上述定义方式可以维护多种类型，有点像元组）。</p><p>处理树的基本算法此处也不多赘述，基本全部会在数据结构系列的课程中涵盖。</p><h3id="二分查找二叉搜索树bst和其他">二分查找，二叉搜索树（BST）和其他</h3><p>数据结构的基本内容，此处不多赘述。有需要的可以阅读<ahref="https://note.tonycrane.cc/cs/algorithm/ds/summary1/">鹤翔万里的笔记本</a>或者<ahref="https://oi-wiki.org/basic/binary/">OIWiki</a>，挑合适的内容看就行。</p><p>然后关于课程里提到的符号处理，浙大计算机系的同学应该会惊喜的发现这是FDS课程的一个经典Project“自动求导机”的简化版（只有加乘运算和单参数）。有需要的同学可以看一看<ahref="https://github.com/LOnion1124/FDS-project-AutoGrad">我的实现</a>。</p><h2 id="sicp工具库">SICP工具库</h2><p>NUS的历代学生开发并维护了一堆用于SICP的工具库，文档可以在<ahref="https://source-academy.github.io/modules/documentation/index.html">这里</a>查看。</p><h3 id="curves图形库">Curves：图形库</h3><p>SICP提供了一个简单的用于实现曲线的图形库。</p><p>一个<strong>曲线</strong>是具有如下性质的函数：</p><ul><li>接受一个范围在[0, 1]的浮点参数</li><li>返回一个点对象（实现决定）</li></ul><p>实验环境预置了图形库，图形库接口的使用方法并不是课程关心的内容，细节可以参阅文档，这里不多赘述。</p><p>一个简单的绘制2D曲线的例子：</p><div class="sourceCode" id="cb17"><preclass="sourceCode js"><code class="sourceCode javascript"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> &#123;make_point<span class="op">,</span> draw_connected_full_view<span class="op">,</span> x_of<span class="op">,</span> y_of&#125; <span class="im">from</span> <span class="st">&quot;curve&quot;</span><span class="op">;</span></span><span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span><span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">circle</span>(t)</span><span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">make_point</span>(<span class="fu">math_cos</span>(<span class="dv">2</span> <span class="op">*</span> math_PI <span class="op">*</span> t)<span class="op">,</span> <span class="fu">math_sin</span>(<span class="dv">2</span> <span class="op">*</span> math_PI <span class="op">*</span> t))<span class="op">;</span></span><span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span><span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">spiral_rep</span>(rep<span class="op">,</span> t)</span><span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> p <span class="op">=</span> <span class="fu">circle</span>(t <span class="op">*</span> rep <span class="op">%</span> <span class="fl">1.0</span>)<span class="op">;</span></span><span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> r <span class="op">=</span> t<span class="op">;</span></span><span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">make_point</span>(r <span class="op">*</span> <span class="fu">x_of</span>(p)<span class="op">,</span> r <span class="op">*</span> <span class="fu">y_of</span>(p))<span class="op">;</span></span><span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a></span><span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">get_spiral_rep</span>(rep)</span><span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> t <span class="kw">=&gt;</span> <span class="fu">spiral_rep</span>(rep<span class="op">,</span> t)<span class="op">;</span></span><span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a></span><span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="fu">draw_connected_full_view</span>(<span class="dv">200</span>)(<span class="fu">get_spiral_rep</span>(<span class="dv">3</span>))<span class="op">;</span></span></code></pre></div><p>效果如下：</p><p><img src="/img/sicp/spiral.png" /></p><h3 id="sound声音库">Sound：声音库</h3><p>事实上，生成音符就是生成对应的波形。SICP提供了对应的解析工具用于播放，我们需要做的就是把想要播放的音符做成正弦函数，参数的变化范围就是对应的时长（秒），因此可以注意到正弦函数里的系数乘上了<spanclass="math inline">\(2\pi\)</span>。</p><p>比如生成标准音：</p><div class="sourceCode" id="cb18"><preclass="sourceCode js"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> pitch_A_wave <span class="op">=</span> t <span class="kw">=&gt;</span> <span class="fu">math_sin</span>(<span class="dv">2</span> <span class="op">*</span> math_PI <span class="op">*</span> <span class="dv">440</span> <span class="op">*</span> t)<span class="op">;</span> <span class="co">// A4</span></span><span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> pitch_A <span class="op">=</span> <span class="fu">make_sound</span>(pitch_A_wave<span class="op">,</span> <span class="fl">1.5</span>)<span class="op">;</span></span><span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">play</span>(pitch_A)<span class="op">;</span></span></code></pre></div><p>生成和弦（也就是正选波的叠加），注意通过振幅调整音量：</p><div class="sourceCode" id="cb19"><preclass="sourceCode js"><code class="sourceCode javascript"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> C_maj_chord_wave <span class="op">=</span></span><span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    t <span class="kw">=&gt;</span> <span class="fl">0.33</span> <span class="op">*</span> <span class="fu">math_sin</span>(<span class="dv">2</span> <span class="op">*</span> math_PI <span class="op">*</span> <span class="fl">261.63</span> <span class="op">*</span> t) <span class="op">+</span> <span class="co">// C4</span></span><span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.33</span> <span class="op">*</span> <span class="fu">math_sin</span>(<span class="dv">2</span> <span class="op">*</span> math_PI <span class="op">*</span> <span class="fl">329.63</span> <span class="op">*</span> t) <span class="op">+</span> <span class="co">// E4</span></span><span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.33</span> <span class="op">*</span> <span class="fu">math_sin</span>(<span class="dv">2</span> <span class="op">*</span> math_PI <span class="op">*</span> <span class="fl">392.00</span> <span class="op">*</span> t)<span class="op">;</span> <span class="co">// G4</span></span><span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> C_maj_chord <span class="op">=</span> <span class="fu">make_sound</span>(C_maj_chord_wave<span class="op">,</span> <span class="fl">1.5</span>)<span class="op">;</span></span><span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="fu">play</span>(C_maj_chord)<span class="op">;</span></span></code></pre></div><p>拼接成旋律（也就是分段函数）：</p><div class="sourceCode" id="cb20"><preclass="sourceCode js"><code class="sourceCode javascript"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> doremi_wave <span class="op">=</span></span><span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>        t <span class="kw">=&gt;</span> t <span class="op">&lt;</span> <span class="fl">0.5</span></span><span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> <span class="fu">math_sin</span>(<span class="dv">2</span> <span class="op">*</span> math_PI <span class="op">*</span> <span class="fl">261.63</span> <span class="op">*</span> t) <span class="co">// C4</span></span><span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> t <span class="op">&lt;</span> <span class="fl">1.0</span></span><span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> <span class="fu">math_sin</span>(<span class="dv">2</span> <span class="op">*</span> math_PI <span class="op">*</span> <span class="fl">293.66</span> <span class="op">*</span> t) <span class="co">// D4</span></span><span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> <span class="fu">math_sin</span>(<span class="dv">2</span> <span class="op">*</span> math_PI <span class="op">*</span> <span class="fl">329.63</span> <span class="op">*</span> t)<span class="op">;</span> <span class="co">// E4</span></span><span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> doremi <span class="op">=</span> <span class="fu">make_sound</span>(doremi_wave<span class="op">,</span> <span class="fl">1.5</span>)<span class="op">;</span></span><span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="fu">play</span>(doremi)<span class="op">;</span></span></code></pre></div><p>这里贴一个音名频率对照表：</p><table><colgroup><col style="width: 8%" /><col style="width: 16%" /><col style="width: 8%" /><col style="width: 16%" /><col style="width: 8%" /><col style="width: 16%" /><col style="width: 8%" /><col style="width: 16%" /></colgroup><thead><tr><th>音符</th><th>频率(hz)</th><th>音符</th><th>频率(hz)</th><th>音符</th><th>频率(hz)</th><th>音符</th><th>频率(hz)</th></tr></thead><tbody><tr><td>C0</td><td>16.35</td><td>C2</td><td>65.41</td><td>C4</td><td>261.63</td><td>C6</td><td>1046.50</td></tr><tr><td>C#0</td><td>17.32</td><td>C#2</td><td>69.30</td><td>C#4</td><td>277.18</td><td>C#6</td><td>1108.73</td></tr><tr><td>D0</td><td>18.35</td><td>D2</td><td>73.42</td><td>D4</td><td>293.66</td><td>D6</td><td>1174.66</td></tr><tr><td>D#0</td><td>19.45</td><td>D#2</td><td>77.78</td><td>D#4</td><td>311.13</td><td>D#6</td><td>1244.51</td></tr><tr><td>E0</td><td>20.60</td><td>E2</td><td>82.41</td><td>E4</td><td>329.63</td><td>E6</td><td>1318.51</td></tr><tr><td>F0</td><td>21.83</td><td>F2</td><td>87.31</td><td>F4</td><td>349.23</td><td>F6</td><td>1396.91</td></tr><tr><td>F#0</td><td>23.12</td><td>F#2</td><td>92.50</td><td>F#4</td><td>369.99</td><td>F#6</td><td>1479.98</td></tr><tr><td>G0</td><td>24.50</td><td>G2</td><td>98.00</td><td>G4</td><td>392.00</td><td>G6</td><td>1567.98</td></tr><tr><td>G#0</td><td>25.96</td><td>G#2</td><td>103.83</td><td>G#4</td><td>415.30</td><td>G#6</td><td>1661.22</td></tr><tr><td>A0</td><td>27.50</td><td>A2</td><td>110.00</td><td>A4</td><td>440.00</td><td>A6</td><td>1760.00</td></tr><tr><td>A#0</td><td>29.14</td><td>A#2</td><td>116.54</td><td>A#4</td><td>466.16</td><td>A#6</td><td>1864.66</td></tr><tr><td>B0</td><td>30.87</td><td>B2</td><td>123.47</td><td>B4</td><td>493.88</td><td>B6</td><td>1975.53</td></tr><tr><td>C1</td><td>32.70</td><td>C3</td><td>130.81</td><td>C5</td><td>523.25</td><td>C7</td><td>2093.00</td></tr><tr><td>C#1</td><td>34.65</td><td>C#3</td><td>138.59</td><td>C#5</td><td>554.37</td><td></td><td></td></tr><tr><td>D1</td><td>36.71</td><td>D3</td><td>146.83</td><td>D5</td><td>587.33</td><td></td><td></td></tr><tr><td>D#1</td><td>38.89</td><td>D#3</td><td>155.56</td><td>D#5</td><td>622.25</td><td></td><td></td></tr><tr><td>E1</td><td>41.20</td><td>E3</td><td>164.81</td><td>E5</td><td>659.25</td><td></td><td></td></tr><tr><td>F1</td><td>43.65</td><td>F3</td><td>174.61</td><td>F5</td><td>698.46</td><td></td><td></td></tr><tr><td>F#1</td><td>46.25</td><td>F#3</td><td>185.00</td><td>F#5</td><td>739.99</td><td></td><td></td></tr><tr><td>G1</td><td>49.00</td><td>G3</td><td>196.00</td><td>G5</td><td>783.99</td><td></td><td></td></tr><tr><td>G#1</td><td>51.91</td><td>G#3</td><td>207.65</td><td>G#5</td><td>830.61</td><td></td><td></td></tr><tr><td>A1</td><td>55.00</td><td>A3</td><td>220.00</td><td>A5</td><td>880.00</td><td></td><td></td></tr><tr><td>A#1</td><td>58.27</td><td>A#3</td><td>233.08</td><td>A#5</td><td>932.33</td><td></td><td></td></tr><tr><td>B1</td><td>61.74</td><td>B3</td><td>246.94</td><td>B5</td><td>987.77</td><td></td><td></td></tr></tbody></table><p>事实上，有从音符MIDI名称计算频率的公式： <spanclass="math display">\[f = 440 \cdot 2^{\frac{n - 69}{12}}\]</span> 其中<spanclass="math inline">\(f\)</span>是频率，单位是赫兹；<spanclass="math inline">\(n\)</span>是MIDI音名，中央C的音名是60。</p><p>基于此，可以实现基于正弦波的编曲引擎。笔者写了一个简单的版本以供参考：</p><div class="sourceCode" id="cb21"><preclass="sourceCode js"><code class="sourceCode javascript"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> &#123;make_sound<span class="op">,</span> play&#125; <span class="im">from</span> <span class="st">&quot;sound&quot;</span><span class="op">;</span></span><span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span><span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Use MIDI number to represent note</span></span><span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> get_freq <span class="op">=</span> number <span class="kw">=&gt;</span> <span class="dv">440</span> <span class="op">*</span> <span class="fu">math_pow</span>(<span class="dv">2</span><span class="op">,</span> (number <span class="op">-</span> <span class="dv">69</span>) <span class="op">/</span> <span class="dv">12</span>)<span class="op">;</span></span><span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span><span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co">// Single note wave generator</span></span><span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">note_wave</span>(number<span class="op">,</span> loudness)</span><span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> freq <span class="op">=</span> <span class="fu">get_freq</span>(number)<span class="op">;</span></span><span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> t <span class="kw">=&gt;</span> loudness <span class="op">*</span> <span class="fu">math_sin</span>(<span class="dv">2</span> <span class="op">*</span> math_PI <span class="op">*</span> freq <span class="op">*</span> t)<span class="op">;</span></span><span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span><span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co">// Chord wave generator</span></span><span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">chord_wave</span>(numbers<span class="op">,</span> loudness)</span><span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">iter</span>(remains<span class="op">,</span> cnt<span class="op">,</span> cur_chord)</span><span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    &#123;</span><span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">is_null</span>(remains)</span><span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>               <span class="op">?</span> cur_chord</span><span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>               <span class="op">:</span> <span class="fu">iter</span>(<span class="fu">tail</span>(remains)<span class="op">,</span> cnt <span class="op">+</span> <span class="dv">1</span><span class="op">,</span></span><span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>                      t <span class="kw">=&gt;</span> (cnt <span class="op">/</span> (cnt <span class="op">+</span> <span class="dv">1</span>)) <span class="op">*</span> <span class="fu">cur_chord</span>(t) <span class="op">+</span></span><span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">note_wave</span>(<span class="fu">head</span>(remains)<span class="op">,</span></span><span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>                                 <span class="dv">1</span> <span class="op">/</span> (cnt <span class="op">+</span> <span class="dv">1</span>))(t))<span class="op">;</span></span><span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    &#125;</span><span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> unit_chord <span class="op">=</span> <span class="fu">iter</span>(numbers<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> s <span class="kw">=&gt;</span> <span class="dv">0</span>)<span class="op">;</span></span><span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> t <span class="kw">=&gt;</span> loudness <span class="op">*</span> <span class="fu">unit_chord</span>(t)<span class="op">;</span></span><span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a></span><span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">make_melody</span>(waves<span class="op">,</span> durations)</span><span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>&#123;</span><span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Helper function to write durations onto time axis </span></span><span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">get_timestamps</span>(cur<span class="op">,</span> acc)</span><span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>    &#123;</span><span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">is_null</span>(cur)</span><span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>               <span class="op">?</span> <span class="kw">null</span></span><span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>               <span class="op">:</span> <span class="fu">pair</span>(acc <span class="op">+</span> <span class="fu">head</span>(cur)<span class="op">,</span> <span class="fu">get_timestamps</span>(<span class="fu">tail</span>(cur)<span class="op">,</span> acc <span class="op">+</span> <span class="fu">head</span>(cur)))<span class="op">;</span></span><span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>    &#125;</span><span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>    </span><span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Whole duration of the melody</span></span><span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Use recursive progress to calculate everything again</span></span><span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Because loops are yet to be available</span></span><span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">get_length</span>(cur)</span><span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>    &#123;</span><span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">is_null</span>(cur)</span><span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>               <span class="op">?</span> <span class="dv">0</span></span><span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>               <span class="op">:</span> <span class="fu">head</span>(cur) <span class="op">+</span> <span class="fu">get_length</span>(<span class="fu">tail</span>(cur))<span class="op">;</span></span><span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>    &#125;</span><span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>    </span><span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Connect several waves together</span></span><span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">wave_connect</span>(waves<span class="op">,</span> timestamps)</span><span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>    &#123;</span><span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">is_null</span>(waves)</span><span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>               <span class="op">?</span> t <span class="kw">=&gt;</span> <span class="dv">0</span></span><span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a>               <span class="op">:</span> t <span class="kw">=&gt;</span> t <span class="op">&lt;</span> <span class="fu">head</span>(timestamps)</span><span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>               <span class="op">?</span> <span class="fu">head</span>(waves)(t)</span><span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a>               <span class="op">:</span> <span class="fu">wave_connect</span>(<span class="fu">tail</span>(waves)<span class="op">,</span> <span class="fu">tail</span>(timestamps))(t)<span class="op">;</span></span><span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a>    &#125;</span><span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a>    </span><span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> timestamps <span class="op">=</span> <span class="fu">get_timestamps</span>(durations<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span><span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> length <span class="op">=</span> <span class="fu">get_length</span>(durations)<span class="op">;</span></span><span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a></span><span id="cb21-62"><a href="#cb21-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">make_sound</span>(<span class="fu">wave_connect</span>(waves<span class="op">,</span> timestamps)<span class="op">,</span> length)<span class="op">;</span></span><span id="cb21-63"><a href="#cb21-63" aria-hidden="true" tabindex="-1"></a>&#125;</span></code></pre></div><p>以下这段使用示例代码生成了烂大街的4536251和弦进行：</p><div class="sourceCode" id="cb22"><preclass="sourceCode js"><code class="sourceCode javascript"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> c1 <span class="op">=</span> <span class="fu">chord_wave</span>(<span class="fu">list</span>(<span class="dv">60</span><span class="op">,</span> <span class="dv">65</span><span class="op">,</span> <span class="dv">69</span>)<span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span> <span class="co">// IV</span></span><span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> c2 <span class="op">=</span> <span class="fu">chord_wave</span>(<span class="fu">list</span>(<span class="dv">62</span><span class="op">,</span> <span class="dv">67</span><span class="op">,</span> <span class="dv">71</span>)<span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span> <span class="co">// V</span></span><span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> c3 <span class="op">=</span> <span class="fu">chord_wave</span>(<span class="fu">list</span>(<span class="dv">64</span><span class="op">,</span> <span class="dv">67</span><span class="op">,</span> <span class="dv">71</span>)<span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span> <span class="co">// iii</span></span><span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> c4 <span class="op">=</span> <span class="fu">chord_wave</span>(<span class="fu">list</span>(<span class="dv">64</span><span class="op">,</span> <span class="dv">69</span><span class="op">,</span> <span class="dv">72</span>)<span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span> <span class="co">// vi</span></span><span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> c5 <span class="op">=</span> <span class="fu">chord_wave</span>(<span class="fu">list</span>(<span class="dv">62</span><span class="op">,</span> <span class="dv">65</span><span class="op">,</span> <span class="dv">69</span>)<span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span> <span class="co">// ii</span></span><span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> c6 <span class="op">=</span> <span class="fu">chord_wave</span>(<span class="fu">list</span>(<span class="dv">62</span><span class="op">,</span> <span class="dv">67</span><span class="op">,</span> <span class="dv">71</span>)<span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span> <span class="co">// V</span></span><span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> c7 <span class="op">=</span> <span class="fu">chord_wave</span>(<span class="fu">list</span>(<span class="dv">60</span><span class="op">,</span> <span class="dv">64</span><span class="op">,</span> <span class="dv">67</span><span class="op">,</span> <span class="dv">72</span>)<span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span> <span class="co">// I</span></span><span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span><span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> melody <span class="op">=</span> <span class="fu">make_melody</span>(<span class="fu">list</span>(c1<span class="op">,</span> c2<span class="op">,</span> c3<span class="op">,</span> c4<span class="op">,</span> c5<span class="op">,</span> c6<span class="op">,</span> c7)<span class="op">,</span> <span class="fu">list</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>))<span class="op">;</span></span><span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="fu">play</span>(melody)<span class="op">;</span></span></code></pre></div><h2 id="arcade_2d2d游戏引擎">Arcade_2d：2D游戏引擎</h2><p>一个简陋的2D游戏引擎。简陋是指这个引擎只实现了一些最基本的功能，其他的比如物理模拟全部需要自己写。</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SICP </tag>
            
            <tag> 编程基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数字逻辑设计：布尔代数</title>
      <link href="/posts/f3a91867bf5b/"/>
      <url>/posts/f3a91867bf5b/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><blockquote><p><strong>布尔代数</strong>（英语：Boolean algebra）在<ahref="https://zh.wikipedia.org/wiki/抽象代数">抽象代数</a>中是指捕获了<ahref="https://zh.wikipedia.org/wiki/集合_(数学)">集合</a>运算和<ahref="https://zh.wikipedia.org/wiki/逻辑">逻辑</a>运算二者的根本性质的一个<ahref="https://zh.wikipedia.org/wiki/代数结构">代数结构</a>（就是说一组元素和服从定义的<ahref="https://zh.wikipedia.org/wiki/公理">公理</a>的在这些元素上运算）。特别是，它处理<ahref="https://zh.wikipedia.org/wiki/集合_(数学)">集合</a>运算<ahref="https://zh.wikipedia.org/wiki/交集">交集</a>、<ahref="https://zh.wikipedia.org/wiki/并集">并集</a>、<ahref="https://zh.wikipedia.org/wiki/补集">补集</a>；和<ahref="https://zh.wikipedia.org/wiki/逻辑">逻辑</a>运算<ahref="https://zh.wikipedia.org/wiki/逻辑合取">与</a>、<ahref="https://zh.wikipedia.org/wiki/逻辑析取">或</a>、<ahref="https://zh.wikipedia.org/wiki/逻辑否定">非</a>。</p></blockquote><h2 id="记号">记号</h2><ul><li>与门：<span class="math inline">\(F(A,B)=A\times B\)</span></li><li>或门：<span class="math inline">\(F(A,B)=A+B\)</span></li><li>非门：<span class="math inline">\(F(A)=\bar{A}\)</span>或<spanclass="math inline">\(F(A)=A&#39;\)</span>或<spanclass="math inline">\(F(A)=\neg A\)</span></li></ul><h2 id="运算规则">运算规则</h2><h3 id="律">01律</h3><p><span class="math display">\[\bar{0}=1\]</span></p><p><span class="math display">\[\bar{1}=0\]</span></p><p><span class="math display">\[0\times A=0\]</span></p><p><span class="math display">\[0+A=A\]</span></p><p><span class="math display">\[1\times A=A\]</span></p><p><span class="math display">\[1+A=1\]</span></p><h3 id="重复律">重复律</h3><p><span class="math display">\[A\times A=A\]</span></p><p><span class="math display">\[A+A=A\]</span></p><h3 id="互补律">互补律</h3><p><span class="math display">\[A\times \bar{A}=0\]</span></p><p><span class="math display">\[A+\bar{A}=1\]</span></p><p>以上的恒等式常常用于化简代数式，即补入常数，进而因式分解或做其他操作。</p><h3 id="交换律">交换律</h3><p><span class="math display">\[A+B=B+A\]</span></p><p><span class="math display">\[A\times B = B\times A\]</span></p><h3 id="结合律">结合律</h3><p><span class="math display">\[(A\times B)\times C=A\times (B\times C)\]</span></p><p><span class="math display">\[(A+B)+C=A+(B+C)\]</span></p><h3 id="分配律">分配律</h3><p><span class="math display">\[A\times (B+C)=A\times B + A\times C\]</span></p><p><span class="math display">\[A+B\times C=(A+B)\times (A+C)\]</span></p><p>注意第二条等式（加对乘的分配律），证明考虑逆向推导。这个性质可用于化为POM标准型的场合（见下文）。</p><p><strong>以上等式是显然的，使用真值表即可直观证明。证明过程略去。</strong></p><h3 id="吸收律">吸收律</h3><p><span class="math display">\[A+A\times B=A\]</span></p><p><span class="math display">\[A\times(A+B)=A\]</span></p><p>证明第一式： <span class="math display">\[A+A\times B=A\times 1+ A\times B=A\times(1+B)=A\times 1=A\]</span> 利用对偶性质即可得到第二式（见下文）。</p><h3 id="化简律">化简律</h3><p><span class="math display">\[A+\bar{A}\times B=A+B\]</span></p><p><span class="math display">\[A\times (\bar{A}+B)=A\times B\]</span></p><p>证明第一式： <span class="math display">\[A+\bar{A}\times B=(A+\bar{A})\times(A+B)=1\times (A+B)=A+B\]</span> 同样利用对偶性质得到第二式。</p><h3 id="归一律">归一律</h3><p><span class="math display">\[A\times B + \bar{A}\times C+B\times C=A\times B+\bar{A}\times C\]</span></p><p><span class="math display">\[(A+B)\times (\bar{A}+C)\times (B+C)=(A+B)\times (\bar{A}+C)\]</span></p><p>证明第一式： <span class="math display">\[A\times B + \bar{A}\times C+B\times C=A\times B\times(C+\bar{C})+\bar{A}\times (B+\bar{B})\times C+(A+\bar{A})\times B\timesC=A\times B\times C+A\times B\times \bar{C}+\bar{A}\times B\timesC+\bar{A}\times \bar{B}\times C=A\times B+\bar{A}\times B\]</span> 利用对偶得到第二式。</p><h3 id="德摩根定律de-morgans-law">德摩根定律（De Morgan's Law）</h3><p><span class="math display">\[\overline{A+B}=\bar{A}\times \bar{B}\]</span></p><p><span class="math display">\[\overline{A\times B}=\bar{A}+\bar{B}\]</span></p><p>可用真值表证明。</p><blockquote><p>Break the line, change the line.</p></blockquote><h2 id="运算性质">运算性质</h2><h3 id="换元性质substitution-theorem">换元性质（SubstitutionTheorem）</h3><p>布尔代数遵循一般的换元规则。</p><h3 id="对偶性质duality-theorem">对偶性质（Duality Theorem）</h3><blockquote><p>如果一个等式成立，那它的对偶亦成立</p></blockquote><p>对偶：保持运算顺序，变量不变，与或互换，01互换。</p><p>前文各性质的两个等式都互为对偶。</p><h3 id="互补性质complementary-theorem">互补性质（ComplementaryTheorem）</h3><p>用于求反函数（指布尔输出相反的函数）。</p><p>互补：保持运算顺序，变量<strong>取反</strong>，与或互换，01互换。</p><p>事实上，直接用德摩根定律更直观。</p><h2 id="规范型canonical-form">规范型（Canonical Form）</h2><p>对应于同样真值表的布尔表达式可能有很多种形式，这使得化简变得很有需要。为了更好地完成这份工作，规定了两种布尔表达式的<strong>规范型</strong>。</p><h3 id="最小项之和som">最小项之和（SOM）</h3><blockquote><p>SOM: Sum-of-Minterm</p></blockquote><p>最小项：当且仅当变量取某一值时为1，其余皆为0。</p><p>换句话说，就是把使输出为1的每一种变量情况<em>或</em>起来。</p><p><strong>记号：</strong>当变量输入的十进制表示为<spanclass="math inline">\(i\)</span>时，对应的最小项记为<spanclass="math inline">\(m_i\)</span>。</p><blockquote><p>输入的十进制表示：例如变量排序为A, B, C，输入情况为A=1, B=1,C=0，则十进制表示为(110)=6。</p></blockquote><h3 id="最大项之积pom">最大项之积（POM）</h3><blockquote><p>POM: Product-of-Maxterm</p></blockquote><p>最大项：当且仅当变量取某一值时为0，其余皆为1。</p><p>可以这样理解：所有最大项<em>与</em>起来，代表的变量情况就是使输出为1的那些。</p><p><strong>记号：</strong>当变量输入的十进制表示为<spanclass="math inline">\(i\)</span>时，对应的最小项记为<spanclass="math inline">\(M_i\)</span>。</p><h3 id="记法">记法</h3><p><span class="math display">\[F=m_{k_1}+m_{k_2}+\dots +m_{k_n}=\Sigma_{m}(k_1,k_2,\dots,k_n)\]</span></p><p><span class="math display">\[F=M_{k_1}\times M_{k_2}\times \dots \timesM_{k_n}=\Pi_{M}(k_1,k_2,\dots,k_n)\]</span></p><p>例如，以下真值表：</p><table><thead><tr><th>X</th><th>Y</th><th>F</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>1</td></tr><tr><td>0</td><td>1</td><td>0</td></tr><tr><td>1</td><td>0</td><td>1</td></tr><tr><td>1</td><td>1</td><td>0</td></tr></tbody></table><p>有： <span class="math display">\[F=\bar{X}\times\bar{Y}+X\times\bar{Y}=m_0+m_2=\Sigma_m(0,2)\]</span></p><p><span class="math display">\[F=(X+\bar{Y})\times(\bar{X}+\bar{Y})=M_1\times M_3=\Pi_M(1,3)\]</span></p><h3 id="som与pom的转化">SOM与POM的转化</h3><p>变量输入最小项取值与最大项取值互为补集。</p><p>例如，<span class="math inline">\(\Sigma_m(0, 1, 3, 5)=\Pi_M(2, 4, 6,7)\)</span>。</p><h2 id="标准型standard-form">标准型（Standard Form）</h2><p>得到规范型后进一步化简得到规范型。注意：规范型必须是<strong>和的积（POS）</strong>或者<strong>积的和（SOP）</strong>的形式。也就是说，电路图只有两层。</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数字逻辑设计 </tag>
            
            <tag> 布尔代数 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Onion主题开发</title>
      <link href="/posts/2a187cbf082d/"/>
      <url>/posts/2a187cbf082d/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>本篇博客将重点放在更加感性化的关于Onion主题开发过程的回忆和记录上。对于hexo-onion的使用说明等技术性内容，我会简洁的写在其<ahref="https://github.com/LOnion1124/hexo-onion">github仓库</a>的README文件内。</p><h2 id="写在前面">写在前面</h2><p>说实话，此刻我的心情是很激动的。此次开发的这个主题不仅是我真正意义上完成的第一个开发项目，更是我高中（准确地说，高二搭建这个博客）以来的宿愿。高中时苦于技术不足（虽然现在依然不足）和缺少时间，一直只能将这个愿望高高挂起。如今步入大学，我想是时候着手满足一下高中时期的缺憾了，于是Onion主题便应运而生。</p><p>首先，我要向一些人或物表示感谢，他们的协助对我的开发过程至关重要。</p><ul><li>GitHub，一切的源头和支撑。</li><li>ChatGPT4o，它教会了我使用jQuery，还完美地帮我写了不少代码。</li><li>Bootstrap5，它的设计风格很符合我的审美，丰富的样式库更是令人惊喜。</li><li>hexo的许多插件的开发者们，好用的插件赋能便利的功能实现，大大提升开发效率。</li><li>所有我阅读的关于自主开发hexo主题的教程文章的作者。尤其是<ahref="https://blog.csdn.net/smileyan9/article/details/124268248">这一系列文章</a>的作者<ahref="https://smileyan.blog.csdn.net/?type=blog">smile-yan</a>，没有他的文章，Onion主题就不会起步。</li><li>我的电脑。伟大无需多言。</li></ul><p>我十分敬佩能够完成系列教程文章的作者们，他们的努力是极富意义的。</p><h2 id="设计理念">设计理念</h2><p>Onion主题是一款极简风格、响应式的hexo主题。</p><p>主题的设计理念是<strong>使创作者能够专注于创作</strong>（不需要考虑除了普通Markdown格式之外的任何格式问题），并且<strong>使读者能够专注于文章内容</strong>，尽可能获得舒适的阅读体验。</p><p>主题支持更强大的Markdown渲染，本地搜索等功能<sup id="fnref:1"><a href="#fn:1" rel="footnote"><spanclass="hint--top hint hint--medium hint--rounded hint--bounce"aria-label="部分功能需要安装插件，详见[github仓库](https://github.com/LOnion1124/hexo-onion)">[1]</span></a></sup>，并内置了一些实用的脚本功能，比如目录提取与聚焦、返回顶部等。</p><p>Onion主题的样式基于Bootstrap5框架，这使得我几乎没有自己编写任何一个css文件。我很喜欢Bootstrap5的设计风格，简洁而优雅，用起来也很方便。</p><p>不幸的是，使用Bootstrap5的方式是在元素内部指定class内容，这导致我难以为hexo根据内容渲染的网页内容指定样式。因此，我不得不采取网页脚本的方式为特定元素分配属性，我决定使用jQuery实现这一功能，因此为了正常使用本主题，请务必保证您的前端环境支持jQuery。</p><h2 id="功能介绍">功能介绍</h2><p>这部分更加详细的内容会放在介绍文档里。简单地说，除了一般的阅读功能外，我为Onion主题内置了如下功能：</p><ul><li>本地搜索</li><li>代码高亮</li><li>LaTeX数学公式渲染</li><li>fancybox图片显示</li><li>按首字母排序的归档</li><li>自动目录提取</li><li>返回顶部按钮</li><li>i18n国际化支持</li></ul><p><strong>为了保证这些功能的正常运行，需要进行一些的插件的安装或者库的引用</strong>，具体方法在<ahref="https://github.com/LOnion1124/hexo-onion">github仓库</a>中给出。</p><h2 id="开发思路">开发思路</h2><p>聊一聊我在部分内容开发时的思路，以及一些未竟的想法。有一种幕后花絮的感觉……</p><h3 id="导航栏和页脚">导航栏和页脚</h3><p>这部分参考了Bootstrap5官网给出的<ahref="https://v5.bootcss.com/docs/examples/">模板</a>，加之小小个性化修改即成。<del>只是单纯的懒</del>。</p><h3 id="主页">主页</h3><p>灵感同样来自于官网模板，借鉴了卡片样式，自主添加了文章封面图展示功能。</p><h3 id="信息栏页面侧边栏">信息栏（页面侧边栏）</h3><p>受到之前使用的Icarus主题的启发，我设计了挂件式的侧边信息展示栏。根据实际页面的不同，它会显示作者信息、文章封面图及摘要或者目录等，并且总是显示站点的分类和标签。我为各个挂件添加了对应的链接功能，方便阅读者实现站内快速跳转。</p><p>基本上，用于描述个人信息的文本我都进行了封装，使得Onion主题的使用者能够通过改编主题目录下的配置文件来修改显示信息。</p><h3 id="文章页">文章页</h3><p>标题显眼地放在最上方，右侧设计了信息框展示文章分类和发布时间（由于个人写作习惯，Onion主题被设计为适配单层文章分类，即一篇文章至多一个分类，但可以有多个标签）。标题栏下部展示了文章标签，若文章无标签则展示为占位框。</p><p>文章主内容框占据主要地位。为了整体美观，Onion主题会将md源文件中的h1、h2标题统一渲染为h3标题并添加下边框，其余标题渲染为h5。侧边栏自动提取文章目录的脚本会统一处理渲染后的h3标题而忽略h5标题。</p><p>我为Markdown文件中的大部分格式添加了对应的样式，相应的效果可以在本站的<ahref="https://lonion1124.github.io/posts/80c1e1c6e5fd/">md测试文章</a>里看到.比较值得一提的是Onion主题支持LaTeX渲染（需要加装插件）。</p><p>代码高亮基于highlight.js，支持指定语言显示。</p><p>我希望实现的效果是在保证创作过程的方便的基础上，尽量使得一切常用的md格式都可以美观且较为符合风格地显示。Onion主题的设计理念是赋能创作者无须在markdown文件里另外写任何除了元数据和普通md格式之外的格式内容，一切美化渲染的工作交给主题完成。我使用的是Typora编辑器，这意味着我只要保证文章在本地渲染正常，它在网页也会是显示正常的。</p><h3 id="归档页">归档页</h3><p>基于hexo插件的按首字母分类的归档功能。为什么不使用常用按年份归档而改为按首字母？一方面是由于首页文章已经按照发布时间排序了，另一方面我不认为按时间分类就效率而言比按标题分类更加有效率。对于想要查找文章的读者而言，按标题查找显然比按时间查找更为可行。</p><h3 id="侧边弹出栏">侧边弹出栏</h3><p>提供了一个存放更多功能的接口，唯一的问题是我目前还没有足够多的功能放进去，因此，它现在仅仅是一个模板。可以在配置文件中选择关闭这个组件。</p><h2 id="进一步美化">进一步美化</h2><p>依据之前的经验，还可以为博客网站添加许多所谓的美化功能，比如随机动漫背景图，背景漂浮的线条或者雪花，鼠标点击事件，等等等等。我在两年前建站伊始十分沉迷于这一类小玩意的配置，然而在阅读其他类似的博客网的过程中，我意识到过于多的美化效果其实反而不利于聚焦阅读，这与Onion主题的设计理念背道而驰。因此，我不会在主题中内置任何花里胡哨的效果。当然，或许在后续的开发中我会单独为网站加一些美化效果，但是它们将会是独立的插件，不会与Onion主题合并。</p><p>我想要单独提的一点是看板娘。在建站初期我很魔怔地想要实现一个完美的看板娘，因此碰了不少钉子（详见我合并整理的2022年更新日志）。我承认我目前并没有完全地从魔怔的状态中走出来，因此可能未来我会为网站添加一个可爱的妹子。不过，出于前述的原因，她也不会与Onion主题有什么关系。</p><p>日后我可能会增加评论功能支持、更加复杂的文章标记和分类系统等等。总的来说，一切以加强创作和阅读体验为重。</p><h2 id="总结">总结</h2><p>碍于本人水平有限，Onion主题的功能远谈不上强大。如果读者愿意尝试为自己的博客使用Onion主题并反馈意见<sup id="fnref:2"><a href="#fn:2" rel="footnote"><spanclass="hint--top hint hint--medium hint--rounded hint--bounce"aria-label="在首页可以找到我的邮箱">[2]</span></a></sup>，我将感到十分荣幸。</p><p>出于学习交流的目的，我欢迎任何人对Onion主题的修改和增强。</p><p>最后，希望Onion主题能越来越好。</p><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style: none; padding-left: 0; margin-left: 40px"><li id="fn:1"><spanstyle="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">[1]</span><spanstyle="display: inline-block; vertical-align: top; margin-left: 10px;">部分功能需要安装插件，详见<a href="https://github.com/LOnion1124/hexo-onion">github仓库</a><a href="#fnref:1" rev="footnote">↩︎</a></span></li><li id="fn:2"><spanstyle="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">[2]</span><spanstyle="display: inline-block; vertical-align: top; margin-left: 10px;">在首页可以找到我的邮箱<a href="#fnref:2" rev="footnote">↩︎</a></span></li></ol></div></div>]]></content>
      
      
      <categories>
          
          <category> 开发日志 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo-onion </tag>
            
            <tag> 随笔 </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>以前的更新日志汇总（2022-2023）</title>
      <link href="/posts/533f6d81b26c/"/>
      <url>/posts/533f6d81b26c/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>弄这个个人博客的初衷，其实没什么。我平时也没有特别明显的写日记一类的习惯，所以建立博客也可以说是一时兴起。不过建了才知道这玩意不容易搞，因此我希望我也能够尽我所能让这个地方充实起来。</p><p>目前我所在的城市还在因为疫情停课，这一天天的网课上的真的很磨人，不过这些都是没办法的事。不管怎样，衷心希望疫情快快退散。</p><p>个人博客里写的大概都是些废话，也许对其他人而言毫无价值，也许对我也毫无价值。但即便这样如果有人愿意来读一读的话我也会很开心。如果你把这个无聊的更新日志看到了这里，谢谢你。</p><h2 id="更新">2022.4.7更新</h2><p>今天更新了icarus主题。</p><p>真是相当好看的主题~源码在<ahref="https://github.com/ppoffice/hexo-theme-icarus">这里</a></p><p>具体的设置还没来得及弄，简单把首页设置了一下。具体的应该之后几天会弄的吧（如果有时间）。<strong>高中党</strong>的痛你们不懂啊啊啊啊啊！</p><p>配置什么的都在名字跟config有关的文件里，虽然里面东西好多，不过操作起来还算简单。</p><blockquote><p>config n. [计]显示配置信息命令；配置，布局</p></blockquote><p>主题还提供了评论等功能的插件，看上去很厉害的样子，有时间就弄。</p><p>顺带一提，点首页的关注会跳到我的b站账号（也不常用就是了）。</p><h2 id="更新-1">2022.4.8更新</h2><p>网站运行初期，更新应该会比较频繁。</p><p>今天成功地把网站的favicon改成了我的头像（笑</p><figure><img src="/img/团子.png" alt="团子" /><figcaption aria-hidden="true">团子</figcaption></figure><p>此外，今天依照着<ahref="https://ppoffice.github.io/hexo-theme-icarus/tags/Icarus%E7%94%A8%E6%88%B7%E6%8C%87%E5%8D%97/">Icarus用户指南</a>上面的内容把我能弄明白的大部分内容设置了一下。大概包括下列内容：</p><ul><li><p>如上文提到的，更改了favicon</p></li><li><p>修改了顶部导航栏的一些内容，删去了"about"和"download ongit"两个部分。</p></li><li><p>修改了不少挂件：</p><ul><li><p>删去了订阅和关注两个我也不知道怎么用的功能</p></li><li><p>把目录栏放到了右边（只有在开启目录的文章的文章页面才看得到，比如说点进<ahref="https://lonion1124.github.io/2022/04/06/md%E6%B5%8B%E8%AF%95/">这篇文章</a></p></li><li><p>修改了右上角站长栏（叫自己站长感觉有点羞耻<del>，但是莫名其妙地爽</del>）里面的相关链接，把推特和脸书之类的东西换成了<ahref="https://www.bilibili.com">b站</a>和<ahref="https://music.163.com">网易云音乐</a></p></li><li><p>想了想还是把友链挂件给去了，因为我没有友好网站啊！路漫漫其修远兮……</p></li></ul></li></ul><p>应该就这些，不过总感觉忘了些什么。昨天也是，明明把那些需要插件而报错的几个模块删掉了（比如分享和打赏），结果在写更新日志的时候忘掉了这件事。</p><p>顺带一提，评论功能真的好复杂，懒得搞……</p><p><del>比起评论插件，我更想弄一个看板娘来</del></p><h3 id="深夜重大更新">深夜重大更新</h3><p>哈哈，什么叫做一不做，二不休啊（得意</p><p>锵锵~<strong>看板娘来了！</strong></p><p>找到一篇大佬的专门针对Icarus的教程（<ahref="https://blog.csdn.net/qq_39986681/article/details/107760961?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522164942683916781683919445%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=164942683916781683919445&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-4-107760961.142%5Ev7%5Epc_search_result_cache,157%5Ev4%5Econtrol&amp;utm_term=icarus%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E7%9C%8B%E6%9D%BF%E5%A8%98&amp;spm=1018.2226.3001.4187">传送门</a>）。对着里面猛一通操作之后总算是搞定了。</p><p>这个看板娘的模板应该是一个挺流行的多合一看板娘套装，我记得之前也在哪边看到过。里面整合了2233两位爷和其他好多妹子，应该说功能超级完善<del>，只不过我还不会用</del>。源码在<ahref="https://github.com/stevenjoezhang/live2d-widget">这里</a>。</p><h2 id="更新-2">2022.4.9更新</h2><p>啊啊啊完全搞不懂看板娘怎么设置！虽然说默认的功能已经非常之香了，不过到底还是比不过DIY啊。目前还没有找到相关的教程，也完全无从下手。</p><p>（流下菜鸟的泪水）</p><p>今天把网站的logo换成了自制的样式，如下图：</p><p><img src="/img/logo1.png" /></p><p>用3d画图草草画的，感觉有点丑，不过我已经尽力了……</p><p>再抱怨一下，github的速度真是太慢了。我每次加载自己的博客都跟蜗牛爬似的，以及上次说过的看板娘的问题。</p><p>昨天偶然翻到的一篇<ahref="https://itrhx.blog.csdn.net/article/details/85010191">教程</a>，里面有各种花里胡哨的博客美化方式。虽然里面看板娘的教程没有帮助到我，不过我根据里面的内容为博客添加了背景动态线和鼠标单击特效，感觉还不错。至少现在这个博客看起来有了一点生机~</p><p>此外，还开启了自带的不蒜子统计功能，看看到时候我把博客分享出去后究竟能有几个人来看呐……总不会一个人都没有吧（小声</p><h3 id="下午更新">下午更新</h3><p>找到一篇讲解看板娘设置的教程，学会了修改看板娘位置的方法。不过那个toggle图标总是弄不好，因此最后还是没有更改位置。还有一个原因是Icarus的两栏布局有点问题，如果左侧挂件挂到右边而左侧置空时，中间文章的位置不会自动调整，我也不会手动修改，所以最后什么都没有弄。</p><p>另外，根据教程里的说法，这个看板娘的模型来源是通过某个接口弄来的在线玩意，然后那个接口好像没有大陆服务，所以这么慢（此消息有待证实）。如果这样的话那么加载慢的原因就算是找到了。网上说解决办法是自建一个接口……太复杂了我不想弄。就这样吧。</p><p>我觉得如果要添加模型的话，这个复杂的路子恐怕是必须要弄明白的……任重而道远啊。</p><h2 id="更新-3">2022.4.10更新</h2><p>经过这几天的涂涂改改，小站已经基本上有了一个博客网站的样子。虽然说还有许多花里胡哨的美化可以添加，不过正如那篇文章里说的：</p><blockquote><p>创作第一，体验第二，避免繁杂，简洁为上！</p></blockquote><p>所以重不在量而在质。<del>才不是为我太菜找借口！</del></p><p>话说回来，折腾了好久，我终于决定放弃优化我的看板娘。实在不会。尝试了自建api不过失败得很惨。就这样吧。已经很可爱了不是么？</p><p>还是说说今天更改了哪些内容吧。</p><ul><li><p>更换了个人头像。黄色团子实在太多了，换了个黑白团子……</p></li><li><p>把看板娘的大小调小了一点，从300px到250px，这样就不会影响阅读和点击或者挡住底部的统计数据了。</p></li><li><p>把顶部导航栏的内容换成了中文，方便阅读</p></li><li><p>挂上了友链挂件。希望之后能有更多友链~</p></li><li><p>此外，按照csdn一篇关于icarus主题的说法，有几个优化速度的小技巧，也一并设置了。虽然好像没什么效果，不过聊胜于无嘛。</p></li></ul><p>之后中心应该就不在更新上了，更新日志的数量应该也会减少。期待第一篇正式博客的发表。</p><p>（刚刚写的时候想到了要更改的地方，可是现在怎么也想不起来……老了老了。）</p><h3 id="深夜更新">深夜更新</h3><p>想起来要干啥了……每次载入网页的时候会有一个蓝色进度条动画，但是因为本来速度就慢所以看得让人很不爽。索性关闭了这个插件。另外，本来想顺手把看板娘的透明度调一下，但是总感觉哪边怪怪的，所以又换了回来。反正现在的大小也不会影响阅读，再加上看板娘有切换是否显示功能，咱就不搞这些消失play什么的啦~</p><h2 id="更新-4">2022.4.11更新</h2><p>把个人头像的黑白团子换回了黄色团子，然后把网站logo的黄色团子换成了黑白团子，这样看上去更整洁一点。另外，修改了个人资料挂件的相关链接。另外，把背景动态线的源码拷贝到了本地。再拷贝的时候我灵光一闪，感觉我找到了本地化看板娘api的方法以及之前失败的原因：没有先行部署。然后我解决了问题，之后发现——</p><p><strong>加载速度更慢了。</strong></p><p>好吧github还不如外源api。这下我是彻底放弃了。就这样吧。</p><h2 id="更新-5">2022.4.13更新</h2><p>修复了看板娘功能按钮大小不匹配导致退出按钮消失的bug。</p><h2 id="更新-6">2022.4.16更新</h2><ul><li>去除了左边栏的个人信息块，让整体观感好了一点。</li><li>修改了左边栏挂件的先后顺序。</li></ul><h2 id="更新-7">2022.4.23更新</h2><p>将左侧个人信息块美化一些后又加了回来。本来是想添加一个动态文字的效果的，不过没有成功。</p><h2 id="更新-8">2022.5.26更新</h2><p>哇一晃一个月了。最近没什么时间写文章，预计之后会有博客更新……</p><p>今天猛然发现看板娘消失了！好一番折腾之后，经过比对live2d-widget里的autoload(在<ahref="https://github.com/stevenjoezhang/live2d-widget">github开源地址</a>这里)之后才发现原来是之前储存看板娘模型的网址换地方了。</p><p>现在的api地址是<ahref="https://fastly.jsdelivr.net/gh/fghrsh/live2d_api/%22">这里</a>。</p><p>这个月没什么空管博客，所以更新记录就一份。本来还是和6月份的合在一起的，后来想想为了整齐一点就单独开一个文档了。</p><h2 id="更新-9">2022.6.1更新</h2><ul><li>为了使文章不那么拥挤，将目录挂件移到了左侧，同时减小了左侧栏宽度</li><li>根据<ahref="https://blog.mchook.cn/2021/07/22/icarus%E4%B8%BB%E9%A2%98%E8%87%AA%E5%AE%9A%E4%B9%89/">这篇教程</a>里的指示维持了目录栏的粘滞特性，不让它随滚动消失</li><li>缩小了看板娘尺寸（250px→225px），以方便阅读</li><li>暂时删去了友链板块，因为感觉没什么用……</li></ul><p>目前正在犹豫是否要给网站增加背景图。</p><h2 id="更新-10">2022.6.2更新</h2><ul><li><p>根据<ahref="https://blog.mchook.cn/2021/07/22/icarus%E4%B8%BB%E9%A2%98%E8%87%AA%E5%AE%9A%E4%B9%89/">昨天的那篇教程</a>，将侧边栏的底色半透明化了，配合背景的动画效果看上去会更加美观一些</p></li><li><p>给网页上的各板块增加了鼠标移动到相应位置时浮动阴影加深的动画效果</p></li><li><p>修改了标签挂件中标签的显示颜色，让它看上去不那么突兀</p></li><li><p>针对文章阅读页面，做出了下列优化：</p><ul><li>在版权模块下面增加了一根分割线</li><li>修改了标签的图标</li></ul></li><li><p>针对首页的文章速览，做出了下列优化：</p><ul><li>将发布日期、更新日期的时间格式更改为数字的“年-月-日”，并增加了图标</li><li>增加了一根分割线</li><li>修改了“阅读更多”按钮的样式，顺便把”更多“改成了”全文“，听上去更顺一点</li></ul><p>注：以上更改均根据<ahref="https://www.alphalxy.com/2019/03/customize-icarus/">这篇教程</a>中的内容</p></li><li><p>昨天缩小了看板娘，结果又忘记缩小配套的图标了。今天修复了这个问题，顺便调整了看板娘说话栏的大小</p></li><li><p>根据官方文档修改了文章页面的挂件显示规则</p></li><li><p>加宽了页面宽度，代价是看板娘又挡掉了一点东西……算了，一切以阅读体验优先……</p></li><li><p>删除了针对文章的访客统计功能。其实我很喜欢这个功能，不过它出bug了，统计的并非各个文章的访问次数而是总访问次数。我猜可能是因为文章标题有中文导致无法识别的原因？搞不懂……</p></li><li><p>更新了站首语</p></li></ul><p>另外网站的加载速度是越来越慢了……不知道怎么搞……</p><h2 id="更新-11">2022.6.3更新</h2><ul><li>把首页的个人头像加了回去</li><li>修改了文章页的挂件类型</li></ul><p>另外看板娘的飞机彩蛋不知道为什么失灵了……</p><h2 id="更新-12">2022.6.8更新</h2><p>把首页的头像去了白底。之前因为没有给挂件底色加透明度所以有没有白底都看不出来，前几天加了透明之后头像的白底就很突兀，今天便解决掉这个问题。利用的工具是<ahref="https://www.aigei.com/bgremover">这个网站</a>。</p><h2 id="更新-13">2022.6.21更新</h2><p>将看板娘工具上调了10px。</p><h2 id="更新-14">2022.7.9更新</h2><p>换了新电脑，因此重新安装了git、node，并且设置了本地与GitHub端的链接。</p><h2 id="更新-15">2022.8.10更新</h2><p>呼！终于完成了更换电脑后博客的重生……</p><p>详情可以参考<ahref="https://lonion1124.github.io/2022/08/10/%E5%85%B3%E4%BA%8E%E6%8D%A2%E7%94%B5%E8%84%91%E4%B9%8B%E5%90%8E%E7%9A%84%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2/">我写的博客</a>里的记录。</p><h2 id="更新-16">2022.8.13更新</h2><p>为了解决博客页面过于单调的问题，今天添加了随机背景动漫图片。</p><p>将<ahref="https://blog.mchook.cn/2021/07/22/icarus%E4%B8%BB%E9%A2%98%E8%87%AA%E5%AE%9A%E4%B9%89/">此篇文章</a>里更改背景中的图片地址换成随机的图片api接口即可。</p><p>随后，为了美观，还更改了顶部栏、底部栏的颜色和不透明度，并将文章栏（在不影响阅读的基础上）也设置为了半透明。</p><p>顺便把网站logo的白底给去了。</p><p>本来我是想不加背景而更改网站配色的，不过这个博客主题的配色方案修改起来非常复杂，就放弃了。</p><p>此外，由于添加了背景，动态线条的特效也被我删去了。这导致了整个网站看上去一动不动。本来为了优化此问题，我打算添加自动下雪的效果，可是效果并不理想（有一个效果理想的模板，可我不会用），遂放弃。</p><p>能力还是太差了啊，唉。</p><p>另外，给看板娘加了几句话。</p><p>本来还想修改一下网站字体，可惜googlefonts上不去。算了。</p><p>还有，把鼠标单击特效改成了随机颜色。</p><h3 id="傍晚更新">傍晚更新</h3><p>我都佩服我自己。之前我说：</p><blockquote><p>本来为了优化此问题，我打算添加自动下雪的效果，可是效果并不理想（有一个效果理想的模板，可我不会用），遂放弃。</p></blockquote><p>但是我没有死心，经过不懈的折腾，我成功地为博客加入了美丽的3d下雪效果。</p><p>代码来自<ahref="https://www.yaxi.net/2016-12-28/1211.html">这里</a>。</p><p>不过，这里只提供了最原始的html代码，具体整合进入icarus的方法是我摸出来的。（我没有一点前端或者后端知识，真就全是连蒙带猜靠直觉。）</p><p>为此，我专门写了一篇<ahref="https://lonion1124.github.io/2022/08/13/在hexo+Icarus4.x搭建的博客上添加3D飘雪效果/">文章</a>来记录搭建此功能的过程。</p><p>另外，不知发生了什么事，网站的字体出了一点问题（我什么也没做啊，真奇怪）。总之把head.jsx里的cyberpunk注释掉，换回了default就正常了。（为什么默认会是cyberpunk啊？）</p><p>在页面变小的时候，顶部栏会分为两行，此时下面一行的颜色不知道怎么更改。试着修改了"node_modules-stylus.styl"里的参数（第一行由$scheme-main变为rgba(255,255,255,0.7)），有变化但是不知道为什么还是不一样。实在没辙，将就一下吧……</p><h2 id="更新-17">2022.8.14更新</h2><p>昨天的颜色透明度问题依然没有解决，不过这次尝试直接更改"node_modules-stylus-variables.styl"里的预设颜色配置，虽然效果没变化，不过起码修改起来方便。而且由于修改的是默认配置，因此也不用担心整体的不协调。（现在所有默认白色都有透明效果啦！）</p><p>本来想着加一个背景音乐播放器，不过不会弄而且感觉用处不大，遂作罢。</p><h2 id="更新-18">2022.9.11更新</h2><p>由于不知道什么原因，看板娘的图片一直无法加载成功，与之相对的各类功能和聊天消息倒是可以，这说明是应该是后端有什么变动，但我尚不知道原因以及解决方法……只能忍痛切割了看板娘功能。有朝一日一定要自建一个稳定的看板娘。</p>]]></content>
      
      
      <categories>
          
          <category> 开发日志 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Markdown渲染示例</title>
      <link href="/posts/36856836d52b/"/>
      <url>/posts/36856836d52b/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="排版">1. 排版</h2><p><strong>粗体</strong></p><p><em>斜体</em></p><p><del>删除线</del></p><p>引用:</p><blockquote><p>Onion主题为大部分Markdown格式配置了样式</p></blockquote><p>有序列表:</p><ol type="1"><li>项目1</li><li>项目2</li><li>项目3</li></ol><p>无序列表:</p><ul><li>项目1</li><li>项目2</li><li>项目3</li></ul><h2 id="图片与链接">2. 图片与链接</h2><p>图片:</p><p><img src="https://picsum.photos/300/200" /></p><p>链接:</p><p><ahref="https://github.com/LOnion1124/hexo-onion">Onion主题Github仓库</a></p><h2 id="标题">3. 标题</h2><p>Onion主题会将h1、h2标题统一渲染为h3标题并添加下边框，其余标题渲染为h5。</p><h2 id="代码">4. 代码</h2><p>行内代码块实例：<code>hello world</code>，<code>git bash here</code></p><p>整块代码高亮示例（代码来自GPT4）:</p><div class="sourceCode" id="cb1"><preclass="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span><span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;vector&gt;</span></span><span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;cmath&gt;</span></span><span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span><span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> <span class="kw">namespace</span> std<span class="op">;</span></span><span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span><span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Rectangle <span class="op">&#123;</span></span><span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span><span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    Rectangle<span class="op">(</span><span class="dt">double</span> w<span class="op">,</span> <span class="dt">double</span> h<span class="op">)</span> <span class="op">:</span> width<span class="op">(</span>w<span class="op">),</span> height<span class="op">(</span>h<span class="op">)</span> <span class="op">&#123;&#125;</span></span><span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> area<span class="op">()</span> <span class="op">&#123;</span> <span class="cf">return</span> width <span class="op">*</span> height<span class="op">;</span> <span class="op">&#125;</span></span><span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> perimeter<span class="op">()</span> <span class="op">&#123;</span> <span class="cf">return</span> <span class="dv">2</span> <span class="op">*</span> <span class="op">(</span>width <span class="op">+</span> height<span class="op">);</span> <span class="op">&#125;</span></span><span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span><span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="kw">private</span><span class="op">:</span></span><span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> width<span class="op">,</span> height<span class="op">;</span></span><span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;;</span></span><span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span><span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">&#123;</span></span><span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    cout <span class="op">&lt;&lt;</span> <span class="st">&quot;C++ Syntax Test&quot;</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span></span><span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span><span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;</span> numbers <span class="op">=</span> <span class="op">&#123;</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">&#125;;</span></span><span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">:</span> numbers<span class="op">)</span> <span class="op">&#123;</span></span><span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>        cout <span class="op">&lt;&lt;</span> <span class="st">&quot;Number: &quot;</span> <span class="op">&lt;&lt;</span> i <span class="op">&lt;&lt;</span> endl<span class="op">;</span></span><span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span><span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span><span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    Rectangle rect<span class="op">(</span><span class="fl">10.5</span><span class="op">,</span> <span class="fl">20.3</span><span class="op">);</span></span><span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    cout <span class="op">&lt;&lt;</span> <span class="st">&quot;Area: &quot;</span> <span class="op">&lt;&lt;</span> rect<span class="op">.</span>area<span class="op">()</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span></span><span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    cout <span class="op">&lt;&lt;</span> <span class="st">&quot;Perimeter: &quot;</span> <span class="op">&lt;&lt;</span> rect<span class="op">.</span>perimeter<span class="op">()</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span></span><span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span><span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span><span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span></code></pre></div><div class="sourceCode" id="cb2"><preclass="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span><span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span><span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Circle:</span><span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, radius):</span><span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.radius <span class="op">=</span> radius</span><span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span><span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> area(<span class="va">self</span>):</span><span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> math.pi <span class="op">*</span> <span class="va">self</span>.radius <span class="op">**</span> <span class="dv">2</span></span><span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span><span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> perimeter(<span class="va">self</span>):</span><span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">2</span> <span class="op">*</span> math.pi <span class="op">*</span> <span class="va">self</span>.radius</span><span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span><span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</span><span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Python Syntax Test&quot;</span>)</span><span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    </span><span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    numbers <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]</span><span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> num <span class="kw">in</span> numbers:</span><span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f&quot;Number: </span><span class="sc">&#123;</span>num<span class="sc">&#125;</span><span class="ss">&quot;</span>)</span><span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    </span><span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    circle <span class="op">=</span> Circle(<span class="dv">10</span>)</span><span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f&quot;Area: </span><span class="sc">&#123;</span>circle<span class="sc">.</span>area()<span class="sc">&#125;</span><span class="ss">&quot;</span>)</span><span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f&quot;Perimeter: </span><span class="sc">&#123;</span>circle<span class="sc">.</span>perimeter()<span class="sc">&#125;</span><span class="ss">&quot;</span>)</span></code></pre></div><div class="sourceCode" id="cb3"><preclass="sourceCode html"><code class="sourceCode html"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span><span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="ot"> lang</span><span class="op">=</span><span class="st">&quot;en&quot;</span><span class="dt">&gt;</span></span><span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span><span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">&quot;UTF-8&quot;</span><span class="dt">&gt;</span></span><span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> name</span><span class="op">=</span><span class="st">&quot;viewport&quot;</span><span class="ot"> content</span><span class="op">=</span><span class="st">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="dt">&gt;</span></span><span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>HTML Syntax Test<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span><span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">style</span><span class="dt">&gt;</span></span><span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        body &#123;</span><span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>            <span class="kw">font-family</span><span class="ch">:</span> <span class="dv">Arial</span><span class="op">,</span> <span class="dv">sans-serif</span><span class="op">;</span></span><span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>            <span class="kw">background-color</span><span class="ch">:</span> <span class="cn">#f4f4f4</span><span class="op">;</span></span><span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>        &#125;</span><span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>        h1 &#123;</span><span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>            <span class="kw">color</span><span class="ch">:</span> <span class="cn">#333</span><span class="op">;</span></span><span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        &#125;</span><span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">.highlight</span> &#123;</span><span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>            <span class="kw">color</span><span class="ch">:</span> <span class="cn">#0077cc</span><span class="op">;</span></span><span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>            <span class="kw">font-weight</span><span class="ch">:</span> <span class="dv">bold</span><span class="op">;</span></span><span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>        &#125;</span><span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">style</span><span class="dt">&gt;</span></span><span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span><span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span><span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>HTML Syntax Test<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span><span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>Here is some text with <span class="dt">&lt;</span><span class="kw">span</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;highlight&quot;</span><span class="dt">&gt;</span>highlighted text<span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span>.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span><span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span><span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>Item 1<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span><span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>Item 2<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span><span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>Item 3<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span><span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span><span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> onclick</span><span class="op">=</span><span class="st">&quot;alert(&#39;Button clicked!&#39;)&quot;</span><span class="dt">&gt;</span>Click Me<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span><span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span><span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div><div class="sourceCode" id="cb4"><preclass="sourceCode javascript"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">greet</span>(name) &#123;</span><span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`Hello, </span><span class="sc">$&#123;</span>name<span class="sc">&#125;</span><span class="vs">!`</span><span class="op">;</span></span><span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span><span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> numbers <span class="op">=</span> [<span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">50</span>]<span class="op">;</span></span><span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span><span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span><span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>numbers<span class="op">.</span><span class="fu">forEach</span>(num <span class="kw">=&gt;</span> &#123;</span><span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    sum <span class="op">+=</span> num<span class="op">;</span></span><span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Number: </span><span class="sc">$&#123;</span>num<span class="sc">&#125;</span><span class="vs">, Current Sum: </span><span class="sc">$&#123;</span>sum<span class="sc">&#125;</span><span class="vs">`</span>)<span class="op">;</span></span><span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>&#125;)<span class="op">;</span></span><span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span><span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> person <span class="op">=</span> &#123;</span><span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">name</span><span class="op">:</span> <span class="st">&quot;Alice&quot;</span><span class="op">,</span></span><span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">age</span><span class="op">:</span> <span class="dv">25</span><span class="op">,</span></span><span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">greet</span><span class="op">:</span> <span class="kw">function</span>() &#123;</span><span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>        <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">greet</span>(<span class="kw">this</span><span class="op">.</span><span class="at">name</span>))<span class="op">;</span></span><span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    &#125;</span><span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>&#125;<span class="op">;</span></span><span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span><span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>person<span class="op">.</span><span class="fu">greet</span>()<span class="op">;</span></span><span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span><span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> factorial <span class="op">=</span> (n) <span class="kw">=&gt;</span> &#123;</span><span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (n <span class="op">===</span> <span class="dv">0</span> <span class="op">||</span> n <span class="op">===</span> <span class="dv">1</span>) <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> n <span class="op">*</span> <span class="fu">factorial</span>(n <span class="op">-</span> <span class="dv">1</span>)<span class="op">;</span></span><span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>&#125;<span class="op">;</span></span><span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a></span><span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Factorial of 5: </span><span class="sc">$&#123;</span><span class="fu">factorial</span>(<span class="dv">5</span>)<span class="sc">&#125;</span><span class="vs">`</span>)<span class="op">;</span></span></code></pre></div><h1 id="表格">5. 表格</h1><table><thead><tr><th>Item</th><th>Value</th></tr></thead><tbody><tr><td>Computer</td><td>$1600</td></tr><tr><td>Phone</td><td>$12</td></tr><tr><td>Pipe</td><td>$1</td></tr></tbody></table><p>可以指定对齐方式, 如Item列左对齐, Value列右对齐, Qty列居中对齐</p><table><thead><tr><th style="text-align: left;">Item</th><th style="text-align: right;">Value</th><th style="text-align: center;">Qty</th></tr></thead><tbody><tr><td style="text-align: left;">Computer</td><td style="text-align: right;">$1600</td><td style="text-align: center;">5</td></tr><tr><td style="text-align: left;">Phone</td><td style="text-align: right;">$12</td><td style="text-align: center;">12</td></tr><tr><td style="text-align: left;">Pipe</td><td style="text-align: right;">$1</td><td style="text-align: center;">234</td></tr></tbody></table><h2 id="html-标签">6. Html 标签</h2><p>支持在 Markdown 语法中嵌套 Html 标签，譬如，你可以用 Html写一个纵跨两行的表格：</p><table><tr><th rowspan="2">值班人员</th><th>星期一</th><th>星期二</th><th>星期三</th></tr><tr><td>李强</td><td>张明</td><td>王平</td></tr></table><p><strong>提示</strong>, 如果想对图片的宽度和高度进行控制,你也可以通过img标签, 如:</p><p><img src="https://picsum.photos/200" width="50px" /></p><h2 id="脚注">7. 脚注</h2><p>basic footnote<sup id="fnref:1"><a href="#fn:1" rel="footnote"><spanclass="hint--top hint hint--medium hint--rounded hint--bounce"aria-label="basic footnote content">[1]</span></a></sup></p><p>here is an inlinefootnote<sup id="fnref:2"><a href="#fn:2" rel="footnote"><spanclass="hint--top hint hint--medium hint--rounded hint--bounce"aria-label="inline footnote">[2]</span></a></sup></p><p>and another one<sup id="fnref:3"><a href="#fn:3" rel="footnote"><spanclass="hint--top hint hint--medium hint--rounded hint--bounce"aria-label="paragraphfootnotecontent">[3]</span></a></sup></p><p>and another one<sup id="fnref:4"><a href="#fn:4" rel="footnote"><spanclass="hint--top hint hint--medium hint--rounded hint--bounce"aria-label="footnote content with some [markdown](https://en.wikipedia.org/wiki/Markdown)">[4]</span></a></sup></p><h2 id="latex-公式">8. LaTeX 公式</h2><p>行内公式：</p><p>质能守恒方程可以用一个很简洁的方程式<spanclass="math inline">\(E=mc^2\)</span>来表达。</p><p>整行公式：</p><p><span class="math display">\[\frac{1}{2} + \frac{3}{4} = \frac{5}{4}\]</span></p><p><span class="math display">\[\frac{d}{dx} \left( x^2 + 3x + 2 \right) = 2x + 3\]</span></p><p><span class="math display">\[lim_{x \to 0} \frac{\sin x}{x} = 1\]</span></p><p><span class="math display">\[A = \begin{pmatrix} 1 &amp; 2 \\ 3 &amp; 4 \end{pmatrix}\]</span></p><p><span class="math display">\[\sin x = \sum_{n=0}^{\infty} (-1)^n \frac{x^{2n+1}}{(2n+1)!}\]</span></p><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style: none; padding-left: 0; margin-left: 40px"><li id="fn:1"><spanstyle="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">[1]</span><spanstyle="display: inline-block; vertical-align: top; margin-left: 10px;">basicfootnote content<a href="#fnref:1" rev="footnote"> ↩︎</a></span></li><li id="fn:2"><spanstyle="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">[2]</span><spanstyle="display: inline-block; vertical-align: top; margin-left: 10px;">inlinefootnote<a href="#fnref:2" rev="footnote"> ↩︎</a></span></li><li id="fn:3"><spanstyle="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">[3]</span><spanstyle="display: inline-block; vertical-align: top; margin-left: 10px;">paragraphfootnote content<a href="#fnref:3" rev="footnote"> ↩︎</a></span></li><li id="fn:4"><spanstyle="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">[4]</span><spanstyle="display: inline-block; vertical-align: top; margin-left: 10px;">footnotecontent with some<a href="https://en.wikipedia.org/wiki/Markdown">markdown</a><a href="#fnref:4" rev="footnote">↩︎</a></span></li></ol></div></div>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>在hexo+Icarus4.x搭建的博客上添加3D飘雪效果</title>
      <link href="/posts/84656f9a144d/"/>
      <url>/posts/84656f9a144d/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>今天由于全站大美化升级，我便想着添加一个飘雪效果（虽然现在是夏天）。不过网上大部分的文章中提供的下雪绘制算法都较为简单粗糙，效果不甚美观，也缺乏针对icarus主题的安装方法（这个主题真是挺小众的……）。在找到一个很漂亮的飘雪算法后，看到安装指南只提供了html源码，没有半点相关知识的我本来是果断选择放弃的，但是我没有死心，连蒙带猜地试了几下之后竟然成功了！我都佩服我自己……不过这也是多亏了我之前各种瞎折腾的经历。</p><p>本文就记录一下<strong>在hexo+Icarus4.x搭建的博客上添加3D飘雪效果</strong>的步骤，方便其他与我状况类似的人的使用。</p><h2 id="下载资源">下载资源</h2><p>请见<ahref="https://www.yaxi.net/2016-12-28/1211.html">这里</a>。</p><p>注：资源不保证一直有效</p><p>资源正常，则会得到名为snow.js的文件。</p><p>此外，还会有如下代码，可以一并复制（此代码有些小问题，建议直接使用后文里提供的）：</p><div class="sourceCode" id="cb1"><preclass="sourceCode html"><code class="sourceCode html"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src</span><span class="op">=</span><span class="st">&quot;http://apps.bdimg.com/libs/jquery/1.7.2/jquery.min.js&quot;</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span><span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src</span><span class="op">=</span><span class="st">&quot;snow.js&quot;</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span><span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">style</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;text/css&quot;</span><span class="dt">&gt;</span></span><span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">.snow-container</span>&#123;</span><span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">position</span><span class="ch">:</span><span class="dv">fixed</span><span class="op">;</span></span><span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">top</span><span class="ch">:</span><span class="dv">0</span><span class="op">;</span><span class="kw">left</span><span class="ch">:</span><span class="dv">0</span><span class="op">;</span></span><span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="kw">width</span><span class="ch">:</span><span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span><span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="kw">height</span><span class="ch">:</span><span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span><span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="kw">pointer-events</span><span class="ch">:</span><span class="dv">none</span><span class="op">;</span></span><span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="kw">z-index</span><span class="ch">:</span><span class="dv">100001</span><span class="op">;</span></span><span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>&#125;</span><span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">style</span><span class="dt">&gt;</span></span><span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;snow-container&quot;</span><span class="dt">&gt;&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span></code></pre></div><h2 id="部署代码">部署代码</h2><ol type="1"><li><p>将“snow.js”放入“source/js/”文件夹（根路径为博客根目录+”/themes/icarus/“，下同）。</p></li><li><p>在“layout/”文件夹中找到“layout.jsx”文件，在body标签内（即“&lt;/body&gt;”之前）加入如下代码：</p><div class="sourceCode" id="cb2"><preclass="sourceCode html"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src</span><span class="op">=</span><span class="st">&quot;http://apps.bdimg.com/libs/jquery/1.7.2/jquery.min.js&quot;</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span><span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src</span><span class="op">=</span><span class="st">&quot;/js/snow.js&quot;</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span><span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;snow-container&quot;</span><span class="dt">&gt;&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span></code></pre></div><p>当然如果文件中已经引用过JQuery的，前两行可以不用加。</p></li><li><p>在“source/css/”文件夹中新建一个“custom.styl”文件，在其中写入如下代码：</p><div class="sourceCode" id="cb3"><preclass="sourceCode css"><code class="sourceCode css"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">.snow-container</span> &#123;</span><span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">position</span><span class="ch">:</span> <span class="dv">fixed</span><span class="op">;</span></span><span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">top</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span><span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">left</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span><span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">width</span><span class="ch">:</span> <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span><span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">height</span><span class="ch">:</span> <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span><span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">pointer-events</span><span class="ch">:</span> <span class="dv">none</span><span class="op">;</span></span><span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">z-index</span><span class="ch">:</span> <span class="dv">100001</span><span class="op">;</span></span><span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>&#125;</span></code></pre></div><p>注：关于custom.styl的更多神奇用法，可以参考<ahref="https://blog.mchook.cn/2021/07/22/icarus%E4%B8%BB%E9%A2%98%E8%87%AA%E5%AE%9A%E4%B9%89/">这篇教程</a>。</p></li><li><p>在“source/css/”文件夹中找到“style.styl”文件，在最后一行加入下列代码：</p><div class="sourceCode" id="cb4"><preclass="sourceCode css"><code class="sourceCode css"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">@import</span> <span class="st">&#39;./custom&#39;</span></span></code></pre></div><p>其功能是引入刚刚新建的“custom.styl”。</p></li><li><p>大功告成！在根目录进入git bash，使用下列代码查看效果：</p><pre class="shell"><code>hexo ghexo s</code></pre><p>正常的话就可以部署了！</p></li></ol><h2 id="结语">结语</h2><p>博客美化毕竟是锦上添花，有人喜欢花里胡哨，有人喜欢极简。Icarus主题其实是走极简风的，不过在我的魔改下变得逐渐生动起来。但是博客到底重在内容，创作第一，美化其次。</p>]]></content>
      
      
      <categories>
          
          <category> 技术指南 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>关于换电脑之后的博客部署</title>
      <link href="/posts/d9e0a0273050/"/>
      <url>/posts/d9e0a0273050/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>大概在两个半月前，我的戴尔电脑暴毙了。</p><p>虽然很伤心，不过伤心的是陪我4年的朋友突然离去。该骂还是要骂：实体店那帮人塞给我的这个型号的品控是真的不行。不过其中也有当年我购买设备经验不足（千万别去实体店！）导致的诸多因素在内，所以也没什么可以怨恨的。总之只能接受这个事实。现在我的网购新电脑到了，使用体验良好，所以就这样吧……这也许就是有了新欢忘了旧爱吧（笑</p><p>然后，关于这个个人博客，由于它的运行原理是本地文件部署至github仓库，所以在更换电脑之后就要重新设置其中的连接。我将其步骤记录在这篇文章里（我希望5年内我不会再用到这个）。</p><p>顺带一提，我7月中旬就写好了这篇博客，这是因为我当时以为我已经成功了，然而事实证明我根本没有成功。但是之后因为各种各样的事情耽误了，于是就拖到现在。</p><p>主要的步骤来源于<ahref="https://blog.csdn.net/qq_34243930/article/details/103956419">这篇博客</a>。</p><h2 id="安装必要程序">安装必要程序</h2><p>新电脑上需要重新安装Node.js和Git</p><p>可以参考<ahref="https://blog.csdn.net/wapchief/article/details/54602515">这篇博客</a>。</p><h2 id="拷贝原来的本地文件">拷贝原来的本地文件</h2><p>好在我的硬盘没坏，里面的文件可以拷贝出来。</p><p>将原来的本地文件（即根目录）拷贝至新电脑。我依然是在D盘里建立了blog文件夹存放相关文件。</p><h2 id="安装hexo">安装hexo</h2><p>在刚刚拷贝的文件夹中右键，选择“git bash here”，然后键入下列代码：</p><pre><code>npm install hexo-cli -g</code></pre><p>即可安装hexo</p><p><strong>注意，需要在博客本地文件的文件夹中安装。</strong></p><p>接着键入如下代码检查是否安装成功：</p><pre><code>hexo -v</code></pre><p>注1：7月份这一步没有成功，这是因为新电脑配备了禁止运行脚本的安全策略。通过<ahref="https://docs.microsoft.com/zh-cn/powershell/module/microsoft.powershell.core/about/about_execution_policies?view=powershell-7.2">这里</a>介绍的方法可以将该策略修改。</p><p>注2：因为魔法原因，npm的下载速度很慢，所以后来我使用了cnpm（即npm中国版）代为下载。操作方法见<ahref="https://blog.csdn.net/weixin_46306193/article/details/124026161">这里</a>。</p><p>注3：7月份失败的另一个原因是电脑阻止了npm的安装程序安装hexo，解决这个问题的方法是在gitbash窗口中运行以下代码：</p><pre><code>cnpm install --force</code></pre><h2 id="生成新电脑的ssh值">生成新电脑的ssh值</h2><p>还是在“git bash here”里面，输入下列代码：</p><pre><code>ssh-keygen -t rsa -C &quot;邮箱地址&quot;</code></pre><p>其中“邮箱地址”（含引号）替换为在注册github时绑定的邮箱地址。</p><p>然后连续点回车直到该命令执行结束。</p><p>接着，在它打印的语句中找到其中有一个“id_rsa.pub”的文件路径，通过这个路径打开这个文件（用记事本打开即可），里面就是新电脑的ssh值。</p><h2 id="将ssh添加至github">将ssh添加至github</h2><p>登录网页端github，点击右上角个人头像，在下拉菜单中选择“settings”选项，然后在右边栏选择“SSHand GPG keys”，点击“new SSH keys”，取名并将刚才生成的ssh值复制进去。</p><p>添加成功后，在“SSH and GPG keys”界面中会出现刚刚新添加的内容。</p><h2 id="换源">换源</h2><p>最后一步了！</p><p>回到本地博客文件夹，进入“git bash here”窗口。</p><p>键入下列代码</p><pre><code>npm config set registry &quot;repository地址&quot;</code></pre><p>其中“repository地址”（含引号）替换为原先的配置文件（“_config.yml”，应该在根目录中）里面的“repository:”之后的网址。</p><p>这一步成功后，就可以像之前一样写博客上传了。</p><h2 id="感想">感想</h2><p>真是相当麻烦……当然，主要是因为我并非专业人员，仅仅是一介学生罢了。不过即使是在学生中，也不乏诸多技术高到令人瞠目结舌的人物。因此，这也不是抱怨的借口。</p><p>这个博客从4月初运行至今，正经文章没写几篇，大部分时间都花在各种折腾与优化上了。在折腾的过程中，我也认识到，折腾总是会结束的。不是我与困难达成共识，就是困难与我达成共识，终归到底是我与自己达成共识。总之，这个博客我希望一直能运行下去，路漫漫其修远兮，吾将上下而求索。</p>]]></content>
      
      
      <categories>
          
          <category> 技术指南 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
